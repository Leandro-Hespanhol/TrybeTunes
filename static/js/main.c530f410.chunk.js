(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{23:function(e,t,n){},31:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(24),s=n.n(c),i=(n(31),n(14)),o=n(3),l=n(4),u=n(6),d=n(5),j=n(13),b=n(7),h=n(2),m=n.n(h),p=n(8),O=n(16),f="user",v=function(e){return localStorage.setItem(f,JSON.stringify(e))},x=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},g=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(f));null===t&&(t={}),x(t)(e)}))},k=function(e){return new Promise((function(t){v(Object(i.a)(Object(i.a)({},{name:"",email:"",image:"",description:""}),e)),x("OK")(t)}))},S=n(0),y=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(S.jsx)("div",{children:Object(S.jsx)("h1",{children:"Carregando..."})})}}]),n}(a.Component),N=y,F=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).onInputChange=function(t){var n=t.target,a=n.name,r="checkbox"===n.type?n.checked:n.value;e.setState(Object(O.a)({},a,r))},e.loadFunction=Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.name,e.setState({loading:!0}),t.next=4,k({name:n});case 4:e.setState({loadPromisse:!0});case 5:case"end":return t.stop()}}),t)}))),e.state={name:"",loading:!1,loadPromisse:!1},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.loading;return e.loadPromisse?Object(S.jsx)(b.a,{to:"/TrybeTunes/search"}):n?Object(S.jsx)(N,{}):Object(S.jsx)("div",{"data-testid":"page-login",className:"login-page-body",children:Object(S.jsxs)("form",{action:"",className:"login-page-fieldset",children:[Object(S.jsx)("iframe",{src:"https://giphy.com/embed/tqfS3mgQU28ko",title:"login-gif",width:"480",height:"360",frameBorder:"0",className:"giphy-embed",allowFullScreen:!0}),Object(S.jsx)("h1",{className:"login-login",children:"Login"}),Object(S.jsxs)("label",{htmlFor:"login-input",className:"login-page-label",children:[Object(S.jsx)("input",{className:"login-page-input","data-testid":"login-name-input",type:"text",name:"name",value:t,onChange:this.onInputChange}),Object(S.jsx)("button",{type:"button",className:"login-page-enter-button","data-testid":"login-submit-button",disabled:t.length<"3",onClick:this.loadFunction,children:"Entrar"})]})]})})}}]),n}(a.Component),C=(n(42),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).getNameHeader=Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loadingUser:!0}),t.next=3,g();case 3:n=t.sent,e.setState({user:n.name,loadingUser:!1});case 5:case"end":return t.stop()}}),t)}))),e.state={user:"",loadingUser:!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getNameHeader()}},{key:"render",value:function(){var e=this.state,t=e.loadingUser,n=e.user;return t?Object(S.jsx)(N,{}):Object(S.jsxs)("header",{"data-testid":"header-component",className:"header-header",children:[Object(S.jsxs)("div",{className:"title-user",children:[Object(S.jsx)("p",{children:"TrybeTunes"}),Object(S.jsxs)("h1",{"data-testid":"header-user-name",children:["Bem vind@"," ",n]})]}),Object(S.jsxs)("nav",{className:"links-nav",children:[Object(S.jsx)("div",{children:Object(S.jsx)(j.b,{to:"/TrybeTunes/search","data-testid":"link-to-search",children:"Search"})}),Object(S.jsx)("div",{children:Object(S.jsxs)(j.b,{to:"/TrybeTunes/favorites","data-testid":"link-to-favorites",children:[" ","Favorites"]})}),Object(S.jsx)("div",{children:Object(S.jsxs)(j.b,{to:"/TrybeTunes/profile","data-testid":"link-to-profile",children:[" ","Profile"]})})]})]})}}]),n}(a.Component)),w=(n(43),function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,r,c,s,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURI(t).replaceAll("%20","+"),a="https://itunes.apple.com/search?entity=album&term=".concat(n,"&attribute=allArtistTerm"),e.next=4,fetch(a);case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,s=c.results,i=s.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",i);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T=w,I=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).artistFunction=Object(p.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.artistName,e.setState({loadingCollection:!0,artistNameSaved:n}),t.next=4,T(n);case 4:a=t.sent,e.setState({loadingCollection:!1,collection:a,artistName:""});case 6:case"end":return t.stop()}}),t)}))),e.collectionCards=function(){var t=e.state.collection;return 0===t.length?Object(S.jsx)("p",{children:"Nenhum \xe1lbum foi encontrado"}):Object(S.jsx)("div",{children:Object(S.jsx)("div",{className:"collection-container",children:t.map((function(e){return Object(S.jsx)(j.b,{"data-testid":"link-to-album-".concat(e.collectionId),to:"/TrybeTunes/album/".concat(e.collectionId),children:Object(S.jsxs)("div",{className:"album-card",children:[Object(S.jsx)("img",{src:e.artworkUrl100,alt:"".concat(e.collectionName," "),className:"track-image"}),Object(S.jsx)("p",{children:e.collectionName}),Object(S.jsx)("p",{children:"Price ".concat(e.collectionPrice)})]})},e.collectionId)}))})})},e.onInputChange=function(t){var n=t.target,a=n.name,r="checkbox"===n.type?n.checked:n.value;e.setState(Object(O.a)({},a,r))},e.state={artistName:"",artistNameSaved:"",loadingCollection:!1,collection:[]},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.artistName,n=e.artistNameSaved;return e.loadingCollection?Object(S.jsx)(N,{}):Object(S.jsxs)("div",{"data-testid":"page-search",children:[Object(S.jsx)(C,{}),Object(S.jsx)("div",{children:Object(S.jsx)("form",{action:"",children:Object(S.jsxs)("label",{htmlFor:"search-input",children:[Object(S.jsx)("input",{"data-testid":"search-artist-input",type:"text",name:"artistName",value:t,onChange:this.onInputChange,placeholder:"Pesquise o artista"}),Object(S.jsx)("button",{type:"button","data-testid":"search-artist-button",disabled:t.length<"2",onClick:this.artistFunction,children:"Pesquisar"})]})})}),Object(S.jsxs)("div",{children:["Resultado de \xe1lbuns de:"," ",n]}),Object(S.jsx)("div",{children:this.collectionCards()})]})}}]),n}(a.Component),P=n(17),U=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=U,J="favorite_songs";JSON.parse(localStorage.getItem(J))||localStorage.setItem(J,JSON.stringify([]));var D=function(){return JSON.parse(localStorage.getItem(J))},E=function(e){return localStorage.setItem(J,JSON.stringify(e))},q=function(e){return function(t){setTimeout((function(){t(e)}),500)}},B=function(){return new Promise((function(e){var t=D();q(t)(e)}))},K=function(e){return new Promise((function(t){if(e){var n=D();E([].concat(Object(P.a)(n),[e]))}q("OK")(t)}))},A=function(e){return new Promise((function(t){var n=D();E(n.filter((function(t){return t.trackId!==e.trackId}))),q("OK")(t)}))},H=(n(23),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).storageFavoriteSongs=Object(p.a)(m.a.mark((function t(){var n,a,r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.isChecked,a=e.props.music,t.next=4,B();case 4:return(r=t.sent).forEach((function(t){t.trackId===a.trackId&&e.setState({isChecked:!n})})),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)}))),e.saveFavoriteSongs=Object(p.a)(m.a.mark((function t(){var n,a,r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.isChecked,a=e.props,r=a.music,c=a.removeSongFromFavs,e.setState({loadingFavorite:!0}),n){t.next=8;break}return t.next=6,K(r);case 6:t.next=11;break;case 8:return t.next=10,A(r);case 10:c(r.trackId);case 11:e.setState({loadingFavorite:!1});case 12:case"end":return t.stop()}}),t)}))),e.handleChecked=Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.state.isChecked,e.setState({isChecked:!n});case 2:case"end":return t.stop()}}),t)}))),e.state={loadingFavorite:!1,isChecked:!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storageFavoriteSongs();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.music,t=e.trackName,n=e.previewUrl,a=e.trackId,r=this.state,c=r.loadingFavorite,s=r.isChecked;return c?Object(S.jsx)(N,{}):Object(S.jsx)("div",{children:Object(S.jsxs)("div",{className:"track-container",children:[Object(S.jsx)("p",{children:t}),Object(S.jsxs)("audio",{"data-testid":"audio-component",src:n,controls:!0,children:[Object(S.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento",Object(S.jsx)("code",{children:"audio"})]}),Object(S.jsxs)("label",{htmlFor:a,children:["Favorita",Object(S.jsx)("input",{className:"fa fa-heart","data-testid":"checkbox-music-".concat(a),type:"checkbox",name:"checked",id:a,onChange:this.handleChecked,checked:s,onClick:this.saveFavoriteSongs})]})]},a)})}}]),n}(a.Component)),R=H;H.defaultProps={removeSongFromFavs:function(){return null}};var L=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).getTracks=function(){var t=Object(p.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loadingTracks:!0}),t.next=3,M(n);case 3:a=t.sent,e.setState({musics:Object(P.a)(a),loadingTracks:!1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={musics:[],loadingTracks:!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.getTracks(e)}},{key:"render",value:function(){var e=this.state,t=e.musics;return e.loadingTracks||0===t.length?Object(S.jsx)(N,{}):Object(S.jsxs)("div",{"data-testid":"page-album",children:[Object(S.jsx)(C,{}),Object(S.jsx)("h1",{children:"\xc1lbum"}),Object(S.jsxs)("div",{className:"album-tracks-container",children:[Object(S.jsxs)("div",{className:"div-album",children:[Object(S.jsx)("img",{src:t[0].artworkUrl100,alt:"".concat(t[0].collectionName," "),className:"track-image"}),Object(S.jsx)("p",{"data-testid":"artist-name",children:"".concat(t[0].artistName)}),Object(S.jsx)("p",{"data-testid":"album-name",children:"".concat(t[0].collectionName)}),Object(S.jsx)("p",{children:"Price ".concat(t[0].collectionPrice)})]}),Object(S.jsx)("div",{children:t.slice(1).map((function(e){return Object(S.jsx)(R,{music:e,removeSongFromFavs:function(){return null}},e.trackId)}))})]})]})}}]),n}(a.Component),Q=L;R.defaultProps={removeSongFromFavs:function(){return null}};var _=n(19),z=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).getFavoritesMusics=Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loadingFavSongs:!0}),t.next=3,B();case 3:n=t.sent,e.setState({stateFavSongs:Object(P.a)(n)}),e.setState({loadingFavSongs:!1});case 6:case"end":return t.stop()}}),t)}))),e.removeSong=function(t){var n=e.state.stateFavSongs.filter((function(e){return e.trackId!==t}));e.setState({stateFavSongs:n})},e.state={loadingFavSongs:!1,stateFavSongs:[]},e.getFavoritesMusics=e.getFavoritesMusics.bind(Object(_.a)(e)),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getFavoritesMusics()}},{key:"render",value:function(){var e=this,t=this.state,n=t.stateFavSongs;return t.loadingFavSongs?Object(S.jsx)(N,{}):n?Object(S.jsxs)("div",{"data-testid":"page-favorites",children:[Object(S.jsx)(C,{}),Object(S.jsx)("h1",{children:"Favorites"}),Object(S.jsx)("div",{children:n.map((function(t){return Object(S.jsx)(R,{music:t,removeSongFromFavs:e.removeSong},t.trackId)}))})]}):Object(S.jsx)(N,{})}}]),n}(a.Component),G=(n(44),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(o.a)(this,n),(e=t.call(this)).loadUser=Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g();case 2:n=t.sent,e.setState(Object(i.a)({loadingProfile:!1},n));case 4:case"end":return t.stop()}}),t)}))),e.profileTemplate=function(){var t=e.state,n=t.name,a=t.image,r=t.email,c=t.description;return Object(S.jsxs)("div",{className:"profile-div",children:[Object(S.jsxs)("div",{className:"image-link-div",children:[Object(S.jsx)("img",{"data-testid":"profile-image",src:a,alt:n}),Object(S.jsx)(j.b,{to:"/TrybeTunes/profile/edit",children:"Editar perfil"})]}),Object(S.jsx)("h2",{children:n}),Object(S.jsx)("h2",{children:n}),Object(S.jsx)("p",{children:r}),Object(S.jsx)("p",{children:c})]})},e.state={name:"",email:"",description:"",image:"",loadingProfile:!0},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadUser()}},{key:"render",value:function(){var e=this.state.loadingProfile;return Object(S.jsxs)("div",{"data-testid":"page-profile",children:[Object(S.jsx)(C,{}),e?Object(S.jsx)(N,{}):this.profileTemplate()]})}}]),n}(a.Component)),V=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(S.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(S.jsx)(C,{}),Object(S.jsx)("h1",{children:"ProfileEdit"})]})}}]),n}(a.Component),W=V,X=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(S.jsx)("div",{"data-testid":"page-not-found",children:"NotFound"})}}]),n}(a.Component),Y=X,Z=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(S.jsx)(j.a,{children:Object(S.jsxs)(b.d,{children:[Object(S.jsx)(b.b,{exact:!0,path:"/TrybeTunes/",children:Object(S.jsx)(F,{})}),Object(S.jsx)(b.b,{path:"/TrybeTunes/search",children:Object(S.jsx)(I,{})}),Object(S.jsx)(b.b,{exact:!0,path:"/TrybeTunes/album/:id",render:function(e){return Object(S.jsx)(Q,Object(i.a)({},e))}}),Object(S.jsx)(b.b,{path:"/TrybeTunes/favorites",children:Object(S.jsx)(z,{})}),Object(S.jsx)(b.b,{exact:!0,path:"/TrybeTunes/profile",children:Object(S.jsx)(G,{})}),Object(S.jsx)(b.b,{exact:!0,path:"/TrybeTunes/profile/edit",children:Object(S.jsx)(W,{})}),Object(S.jsx)(b.b,{path:"*",component:Y})]})})}}]),n}(r.a.Component),$=Z;s.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)($,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.c530f410.chunk.js.map